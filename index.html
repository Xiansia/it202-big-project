<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
	 crossorigin="anonymous">

    </head>
    <body>
	<!-- navigation bar -->
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<a class="navbar-brand" href="#">Landmark Tracker</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"></button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#Input" id="InputNav">Input</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#List" id="ListNav">List</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#Map" id="MapNav">Map</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#About">About</a>
                </li>
            </ul>
        </div>
    </nav>
        
        
    <div class="content" id="Input">
        <p>What city would you like to visit?</p>
        <input type="checkbox" name="Chicago" value="CHI" class="city">Chicago<br>
        <input type="checkbox" name="New York" value="NY" class="city">New York<br>
        <input type="checkbox" name="San Francisco" value="SF" class="city">San Francisco<br>
        
        <button class="mdc-button mdc-button--raised" id="search">
          <div class="mdc-button__ripple"></div>
          <span class="mdc-button__label">Button</span>
        </button>
        
    </div>
        
    <div class="content" id="List">
        This is screen 2
    </div>
            
         
    <div class="content" id="Map">
        <div class="mdc-data-table">
          <table class="mdc-data-table__table" id="data">
            <thead>
              <tr class="mdc-data-table__header-row">
                <th class="mdc-data-table__header-cell mdc-data-table__header-cell--checkbox" role="columnheader" scope="col">
                  <div class="mdc-checkbox mdc-data-table__header-row-checkbox mdc-checkbox--selected">
                    <input type="checkbox" class="mdc-checkbox__native-control" aria-label="Checkbox for header row selection"/>
                    <div class="mdc-checkbox__background">
                      <svg class="mdc-checkbox__checkmark" viewbox="0 0 24 24">
                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59" />
                      </svg>
                      <div class="mdc-checkbox__mixedmark"></div>
                    </div>
                  </div>
                </th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Status</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Signal name</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Severity</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Stage</th>
                <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Time</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Roles</th>
              </tr>
            </thead>
            <tbody class="mdc-data-table__content">
              <tr data-row-id="u0" class="mdc-data-table__row">
                <td class="mdc-data-table__cell mdc-data-table__cell--checkbox">
                  <div class="mdc-checkbox mdc-data-table__row-checkbox">
                    <input type="checkbox" class="mdc-checkbox__native-control" aria-labelledby="u0"/>
                    <div class="mdc-checkbox__background">
                      <svg class="mdc-checkbox__checkmark" viewbox="0 0 24 24">
                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59" />
                      </svg>
                      <div class="mdc-checkbox__mixedmark"></div>
                    </div>
                  </div>
                </td>
                <td class="mdc-data-table__cell">Online</td>
                <td class="mdc-data-table__cell" id="u0">Arcus watch slowdown</td>
                <td class="mdc-data-table__cell">Medium</td>
                <td class="mdc-data-table__cell">Triaged</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">0:33</td>
                <td class="mdc-data-table__cell">Allison Brie</td>
              </tr>
              <tr data-row-id="u1" class="mdc-data-table__row mdc-data-table__row--selected" aria-selected="true">
                <td class="mdc-data-table__cell mdc-data-table__cell--checkbox">
                  <div class="mdc-checkbox mdc-data-table__row-checkbox mdc-checkbox--selected">
                    <input type="checkbox" class="mdc-checkbox__native-control" checked aria-labelledby="u1"/>
                    <div class="mdc-checkbox__background">
                      <svg class="mdc-checkbox__checkmark" viewbox="0 0 24 24">
                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59" />
                      </svg>
                      <div class="mdc-checkbox__mixedmark"></div>
                    </div>
                  </div>
                </td>
                <td class="mdc-data-table__cell">Offline</td>
                <td class="mdc-data-table__cell" id="u1">monarch: prod shared ares-managed-features-provider-heavy</td>
                <td class="mdc-data-table__cell">Huge</td>
                <td class="mdc-data-table__cell">Triaged</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">0:33</td>
                <td class="mdc-data-table__cell">Brie Larson</td>
              </tr>
              <tr data-row-id="u2" class="mdc-data-table__row mdc-data-table__row--selected" aria-selected="true">
                <td class="mdc-data-table__cell mdc-data-table__cell--checkbox">
                  <div class="mdc-checkbox mdc-data-table__row-checkbox mdc-checkbox--selected">
                    <input type="checkbox" class="mdc-checkbox__native-control" checked aria-labelledby="u2"/>
                    <div class="mdc-checkbox__background">
                      <svg class="mdc-checkbox__checkmark" viewbox="0 0 24 24">
                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59" />
                      </svg>
                      <div class="mdc-checkbox__mixedmark"></div>
                    </div>
                  </div>
                </td>
                <td class="mdc-data-table__cell">Online</td>
                <td class="mdc-data-table__cell" id="u2">monarch: prod shared ares-managed-features-provider-heavy</td>
                <td class="mdc-data-table__cell">Minor</td>
                <td class="mdc-data-table__cell">Not triaged</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">0:33</td>
                <td class="mdc-data-table__cell">Jeremy Lake</td>
              </tr>
              <tr data-row-id="u3" class="mdc-data-table__row">
                <td class="mdc-data-table__cell mdc-data-table__cell--checkbox">
                  <div class="mdc-checkbox mdc-data-table__row-checkbox">
                    <input type="checkbox" class="mdc-checkbox__native-control" aria-labelledby="u3"/>
                    <div class="mdc-checkbox__background">
                      <svg class="mdc-checkbox__checkmark" viewbox="0 0 24 24">
                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59" />
                      </svg>
                      <div class="mdc-checkbox__mixedmark"></div>
                    </div>
                  </div>
                </td>
                <td class="mdc-data-table__cell">Online</td>
                <td class="mdc-data-table__cell" id="u3">Arcus watch slowdown</td>
                <td class="mdc-data-table__cell">Negligible</td>
                <td class="mdc-data-table__cell">Triaged</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">0:33</td>
                <td class="mdc-data-table__cell">Angelina Cheng</td>
              </tr>
            </tbody>
          </table>
        </div>
    </div>
  
    <div class="content" id="About">
        App Name: Movie Search Application<br>
        Developer: Conway Dang<br>
        GitHub Repo Link: https://github.com/Xiansia/IT202-BigProject
    </div>

    <script>
        var SFresult = null;
        var Chiresult = null;
        var NYresult = null;
        
        var SFlink = "https://data.sfgov.org/api/views/yqxu-izzm/rows.json"
        var Chilink = "https://data.cityofchicago.org/resource/tdab-kixi.json"
        var NYlink = "https://data.cityofnewyork.us/api/views/qw5n-twjr/rows.json"
        //var html = "";
        $(document).ready(function() {

          function hideScreens() {
            $(".content").hide();

          }
          hideScreens();
          
          
          
          $(".nav-link").on("click", function(){
            hideScreens();
            var target = $(this).attr("href");
            $(target).show();
            $(target).load("page_content/_" + target.replace("#","") + ".html");
          });
        
         });
        
        
        
        $("#ListNav").on("click",function(){
            //No results appeared. How? I don't know.
            if((SFresult == null)&&(NYresult == null)&&(Chiresult == null)){
                $("#List").html("No Results :(");
                return false;
            }

            //Header of Table html
            var html = "<p>Select the areas that you would like to visit.</p>"
            html+= "<div class='mdc-data-table'>";
            html+= "<table class='mdc-data-table__table' id='data'>";
            html+= "<thead>";
            html+= "<tr class='mdc-data-table__header-row'>";
            
            //HTML Checkbox Code
            html+= "<th class='mdc-data-table__header-cell mdc-data-table__header-cell--checkbox' role='columnheader' scope='col'>"
            html+= "<div class='mdc-checkbox mdc-data-table__row-checkbox mdc-checkbox--selected'>"     
            html+= "<input type='checkbox' class='mdc-checkbox__native-control' aria-labelledby='u0'/>"
            html+= "<div class='mdc-checkbox__background'>"
            html+= "<svg class='mdc-checkbox__checkmark' viewbox='0 0 24 24'>"
            html+= "<path class='mdc-checkbox__checkmark-path' fill='none' d='M1.73,12.91 8.1,19.28 22.79,4.59'/>"
            html+= "</svg><div class='mdc-checkbox__mixedmark'></div></div></div></td>"
            
            //Actual Table Info
            html+= "<th class='mdc-data-table__header-cell' role='columnheader' scope='col'>Location Name</th>"
            html+= "<th class='mdc-data-table__header-cell' role='columnheader' scope='col'>City</th>"
            html+= "<th class='mdc-data-table__header-cell' role='columnheader' scope='col'>Latitude</th>"
            html+= "<th class='mdc-data-table__header-cell' role='columnheader' scope='col'>Longitude</th>"
            html+= "</tr>"
            html+= "</thead>"
            
            
            html+= "<tbody class='mdc-data-table__content'>"
            html+= "<tr data-row-id='u0' class='mdc-data-table__row'>"
            html+= "<div class='mdc-checkbox mdc-data-table__row-checkbox'>"
            html+= "</div>"
            
            if(NYresult != null){
                console.log(NYresult);  
                for(var i =0; i < NYresult.data.length; i++){
                    //HTML Row Checkbox Code
                    html+= "<td class='mdc-data-table__cell mdc-data-table__cell--checkbox'>"
                    html+= "<div class='mdc-checkbox mdc-data-table__header-row-checkbox mdc-checkbox--selected'>"
                    html+= "<input type='checkbox' class='mdc-checkbox__native-control' aria-label='Checkbox for header row selection'/>"
                    html+= "<div class='mdc-checkbox__background'>"
                    html+= "<svg class='mdc-checkbox__checkmark' viewbox='0 0 24 24'>"
                    html+= "<path class='mdc-checkbox__checkmark-path' fill='none' d='M1.73,12.91 8.1,19.28 22.79,4.59'/>"
                    html+= "</svg><div class='mdc-checkbox__mixedmark'></div></div></div></th>"
                    
                    
                    var name = NYresult.data[i][12];
                    //console.log("Result: " + NYresult.data[i][12]);
                    html+= "<td class='mdc-data-table__cell'>"+name+"</td>"
                    html+= "<td class='mdc-data-table__cell'>New York</td>"
                    //console.log(NYresult.data[i][11]);
                    var entry = NYresult.data[i][11];
                    var location = entry.substring(16, entry.indexOf(","));
                    var latitude = location.substring(0, location.indexOf(" "));
                    var longitude = location.substring(location.indexOf(" "), location.length);
                    latitude = latitude.trim();
                    longitude = longitude.trim();
                    html+= "<td class='mdc-data-table__cell'>"+longitude+"</td>"
                    html+= "<td class='mdc-data-table__cell'>"+latitude+"</td>"
                    html+= "<tr>";
                }
            }
            if(SFresult != null){
                console.log(SFresult);  
                for (var i = 0; i < SFresult.data.length; i++) {
                    //HTML Row Checkbox Code
                    html+= "<td class='mdc-data-table__cell mdc-data-table__cell--checkbox'>"
                    html+= "<div class='mdc-checkbox mdc-data-table__header-row-checkbox mdc-checkbox--selected'>"
                    html+= "<input type='checkbox' class='mdc-checkbox__native-control' aria-label='Checkbox for header row selection'/>"
                    html+= "<div class='mdc-checkbox__background'>"
                    html+= "<svg class='mdc-checkbox__checkmark' viewbox='0 0 24 24'>"
                    html+= "<path class='mdc-checkbox__checkmark-path' fill='none' d='M1.73,12.91 8.1,19.28 22.79,4.59'/>"
                    html+= "</svg><div class='mdc-checkbox__mixedmark'></div></div></div></th>"
                    
                    var name = SFresult.data[i][10];
                    var entry = SFresult.data[i][8];
                    html+= "<td class='mdc-data-table__cell'>"+name+"</td>"
                    html+= "<td class='mdc-data-table__cell'>San Francisco</td>"
                    var location = entry.substring(12, entry.indexOf(","));
                    var latitude = location.substring(0, location.indexOf(" "));
                    var longitude = location.substring(location.indexOf(" "), location.length);
                    latitude = latitude.trim();
                    longitude = longitude.trim();
                    //console.log(latitude);
                    //console.log(longitude);
                    html+= "<td class='mdc-data-table__cell'>"+longitude+"</td>"
                    html+= "<td class='mdc-data-table__cell'>"+latitude+"</td>"
                    html+= "<tr>";
                }                
            }
            if(Chiresult != null){
                console.log(Chiresult)
                for (var i = 0; i < Chiresult.length; i++) {
                     //HTML Row Checkbox Code
                     html+= "<td class='mdc-data-table__cell mdc-data-table__cell--checkbox'>"
                     html+= "<div class='mdc-checkbox mdc-data-table__header-row-checkbox mdc-checkbox--selected'>"
                     html+= "<input type='checkbox' class='mdc-checkbox__native-control' aria-label='Checkbox for header row selection'/>"
                     html+= "<div class='mdc-checkbox__background'>"
                     html+= "<svg class='mdc-checkbox__checkmark' viewbox='0 0 24 24'>"
                     html+= "<path class='mdc-checkbox__checkmark-path' fill='none' d='M1.73,12.91 8.1,19.28 22.79,4.59'/>"
                     html+= "</svg><div class='mdc-checkbox__mixedmark'></div></div></div></th>"

                     var name = Chiresult[i].landmark_name;
                     html+= "<td class='mdc-data-table__cell'>"+name+"</td>"
                     html+= "<td class='mdc-data-table__cell'>Chicago</td>"
                     var latitude = Chiresult[i].location.latitude;
                     var longitude = Chiresult[i].location.longitude;
                     html+= "<td class='mdc-data-table__cell'>"+longitude+"</td>"
                     html+= "<td class='mdc-data-table__cell'>"+latitude+"</td>"
                     html+= "<tr>";
                }    
            }

            
                
                
            html+= "</table>"
            $("#List").html(html);
            //console.log(document.body.innerHTML);
                
            
            
            
        });
        $("#search").on("click",function(){
            
            var array = document.getElementsByClassName("city");
            for(var item of array){
              if($(item).is(":checked")){
                switch(item.name){
                    case "Chicago":
                        $.get(Chilink, function(response){
                           //console.log("We have reached here.");
                           Chiresult = response;
                           //console.log(Chiresult);
                        });
                        break;
                    case "New York":
                        $.get(NYlink, function(response){
                           //console.log("We have reached here.");
                           NYresult = response;
                           //console.log(NYresult);
                        });
                        break;
                    case "San Francisco":
                        $.get(SFlink, function(response){
                           //console.log("We have reached here.");
                           SFresult = response;
                           //console.log(SFresult);
                        });
                        break;
                }
              }
              else{
                switch(item.name){
                    case "Chicago":
                        Chiresult = null;
                        break;
                    case "New York":
                        NYresult = null;
                        break;
                    case "San Francisco":
                        SFresult = null;
                        break;
                }  
              }
            }
            var table = document.getElementById("data");
            console.log(table);
        });
        
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    </body>
</html>